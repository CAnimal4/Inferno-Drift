<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>InfernoDrift2</title>
  <meta name="color-scheme" content="dark light" />
  <link rel="icon" href="./assets/favicon.ico">
  <link rel="icon" type="image/svg+xml" href="./assets/favicon.svg">
  <link rel="apple-touch-icon" sizes="180x180" href="./assets/favicon-180.png">
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="bg-grid"></div>
  <header class="topbar">
    <div class="brand">
      <div class="logo-dot"></div>
      <div>
        <div class="eyebrow">InfernoDrift</div>
        <div class="title">InfernoDrift2</div>
      </div>
    </div>
    <div class="top-actions">
      <button id="toggleFull" class="ghost">Fullscreen</button>
      <button id="openHelp" class="ghost">How to play</button>
      <button id="openSettings" class="ghost">Settings</button>
      <a class="ghost" href="assets/classic-launcher.html" target="_blank" rel="noopener">Play Classic</a>
    </div>
  </header>

  <main class="shell">
    <section id="menuPanel" class="panel">
      <div class="panel-header">
        <div class="pill warm">Drift + Boost + Combos</div>
        <div class="pill ghost">Desktop + Mobile</div>
      </div>
      <h1>Lightweight drift sprint set in a molten arena.</h1>
      <p class="lede">
        Quick sessions, clean controls, and satisfying drift boosts. Pick an arena, chain drifts for score, grab pickups, and survive the chase.
      </p>

      <div class="menu-actions">
        <button id="startBtn" class="primary">Start run</button>
        <button id="resumeBtn" class="secondary" disabled>Resume</button>
        <button id="watchDemo" class="ghost">Watch attract loop</button>
      </div>

      <div class="map-select">
        <div class="map-list" id="mapList"></div>
        <div class="map-preview">
          <canvas id="mapPreview" width="240" height="240"></canvas>
          <div class="map-meta">
            <div id="mapName">Map</div>
            <div id="mapDesc" class="muted tiny"></div>
          </div>
        </div>
      </div>

      <div class="quick-grid">
        <div>
          <div class="label">Keyboard</div>
          <div class="muted tiny">W/Up throttle &middot; A/D steer &middot; Space drift &middot; Shift boost &middot; Esc pause</div>
        </div>
        <div>
          <div class="label">Touch</div>
          <div class="muted tiny">Left pad steer &middot; Right buttons drift/boost &middot; Tap top-right pause</div>
        </div>
        <div>
          <div class="label">New systems</div>
          <div class="muted tiny">Drift-&gt;Boost &middot; Pickups &middot; Combos &middot; Run perks &middot; Arena hazards</div>
        </div>
      </div>
    </section>

    <section id="gameShell" class="game-shell">
      <button id="pauseBtn" class="hud-btn">Pause</button>
      <canvas id="gameCanvas" width="1280" height="720"></canvas>
      <div id="hud" class="hud hidden">
        <div class="hud-row">
          <div class="hud-card">
            <div class="label">Speed</div>
            <div id="hudSpeed" class="value">0</div>
          </div>
          <div class="hud-card heat-card">
            <div class="label">Heat</div>
            <div class="bar"><div id="heatBar" class="fill"></div></div>
          </div>
          <div class="hud-card">
            <div class="label">Drift</div>
            <div class="bar"><div id="driftBar" class="fill"></div></div>
          </div>
          <div class="hud-card">
            <div class="label">Boost</div>
            <div class="bar"><div id="boostBar" class="fill"></div></div>
          </div>
          <div class="hud-card">
            <div class="label">Score</div>
            <div id="hudScore" class="value">0</div>
          </div>
          <div class="hud-card">
            <div class="label">Combo</div>
            <div id="hudCombo" class="value">x1</div>
          </div>
          <div class="hud-card">
            <div class="label">Lap/Time</div>
            <div id="hudLap" class="value tiny"></div>
          </div>
        </div>
      </div>

      <div id="toast" class="toast"></div>

      <div id="touchControls" class="touch hidden">
        <div class="stick" id="touchSteer">
          <div class="stick-inner"></div>
        </div>
        <div class="touch-buttons">
          <button class="touch-btn" id="touchDrift">Drift</button>
          <button class="touch-btn" id="touchBoost">Boost</button>
        </div>
      </div>

      <div id="focusGate" class="focus-gate hidden">
        <div class="focus-card">
          <div class="eyebrow">Click or tap</div>
          <h3>Focus to drive</h3>
          <div class="muted tiny">Press F for fullscreen Â· ~ for debug</div>
        </div>
      </div>
    </section>
  </main>

  <div id="pauseOverlay" class="overlay hidden">
    <div class="overlay-box">
      <div class="eyebrow">Paused</div>
      <h2>Take a breather</h2>
      <p class="muted">Resume, restart, or hop to another map.</p>
      <div class="overlay-actions">
        <button id="resumePlay" class="primary">Resume</button>
        <button id="restartPlay" class="secondary">Restart</button>
        <button id="backToMenu" class="ghost">Menu</button>
      </div>
    </div>
  </div>

  <div id="gameoverOverlay" class="overlay hidden">
    <div class="overlay-box">
      <div class="eyebrow">Run complete</div>
      <h2 id="gameoverTitle">Burned out</h2>
      <p id="gameoverStats" class="muted tiny"></p>
      <div class="upgrade-grid" id="upgradeGrid"></div>
      <div class="overlay-actions">
        <button id="playAgain" class="primary">Run it back</button>
        <button id="menuReturn" class="ghost">Back to menu</button>
      </div>
    </div>
  </div>

  <div id="settingsOverlay" class="overlay hidden">
    <div class="overlay-box wide">
      <div class="eyebrow">Settings</div>
      <h2>Tune your run</h2>
      <div class="settings-grid">
        <label class="setting">
          <span>Sound</span>
          <select id="settingSound">
            <option value="on">On</option>
            <option value="off">Off</option>
          </select>
        </label>
        <label class="setting">
          <span>Graphics</span>
          <select id="settingGfx">
            <option value="high">High</option>
            <option value="medium">Medium</option>
            <option value="low">Low</option>
          </select>
        </label>
        <label class="setting">
          <span>Speed Scale</span>
          <select id="settingSpeedScale">
            <option value="0.85">0.85x (calm)</option>
            <option value="1" selected>1.0x (default)</option>
            <option value="1.2">1.2x (fast)</option>
          </select>
        </label>
        <label class="setting">
          <span>Controls</span>
          <select id="settingControls">
            <option value="wasd">WASD + Space</option>
            <option value="arrows">Arrows + Space</option>
          </select>
        </label>
        <label class="setting">
          <span>Enemy AI</span>
          <select id="settingEnemyAI">
            <option value="standard">Standard</option>
            <option value="adaptive">Adaptive (learns)</option>
          </select>
        </label>
      </div>
      <div class="muted tiny">Settings persist locally. Adaptive AI stores a small table; you can reset it below.</div>
      <div class="overlay-actions">
        <button id="resetAI" class="ghost">Reset Enemy Learning</button>
        <button id="closeSettings" class="primary">Close</button>
      </div>
    </div>
  </div>

  <div id="helpOverlay" class="overlay hidden">
    <div class="overlay-box wide">
      <div class="eyebrow">How to play</div>
      <h2>Drift, boost, and chain combos.</h2>
      <div class="help-grid">
        <div>
          <div class="label">Objective</div>
          <p class="muted tiny">Pick an arena and drive immediately. Score from speed, drift boosts, pickups, and near misses. If a bot hits you, you respawn.</p>
        </div>
        <div>
          <div class="label">Pickups</div>
          <p class="muted tiny">Coins=score. Ramps let you jump; bots chase and a hit respawns you.</p>
        </div>
        <div>
          <div class="label">Enemies</div>
          <p class="muted tiny">Chasers hunt your tail, Blockers try to cut you off, Hunters close in when you slow down. They avoid lava and keep pressure on you.</p>
        </div>
        <div>
          <div class="label">Upgrades</div>
          <p class="muted tiny">After each run choose one perk that lasts for the next run only.</p>
        </div>
      </div>
      <div class="overlay-actions">
        <button id="closeHelp" class="primary">Close</button>
      </div>
    </div>
  </div>

  <div id="errorOverlay" class="overlay hidden">
    <div class="overlay-box">
      <div class="eyebrow">Error</div>
      <h2 id="errorTitle">Load error</h2>
      <p id="errorBody" class="muted tiny"></p>
      <div class="overlay-actions">
        <button id="errorClose" class="primary">Close</button>
      </div>
    </div>
  </div>

  <!-- Run locally: any static server works. Example: `python -m http.server` then open http://localhost:8000/ -->
  <script src="vendor/three.min.js"></script>
  <script src="app.js"></script>
</body>
</html>
